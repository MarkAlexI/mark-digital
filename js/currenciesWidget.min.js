let n=Math.floor((window.innerWidth-150)/16),e=Math.floor((window.innerHeight-410)/16);let t=localStorage.getItem("BASE")||"USD",r=localStorage.getItem("TSYMS")||"USD,JPY,EUR",i=localStorage.getItem("BOTTOM")||5,d=localStorage.getItem("RIGHT")||2;const c=(n,e=!1)=>`<select\n      id="${n}"\n      class="hidden"\n      ${e?'multiple=""':""}\n    />\n      <option value="">--Choose currency</option>\n      ${"UAH, EUR, USD, GBP, JPY, AUD, CAD, CHF, OMR, NZD, PLN, HKD, CNY, MYR, BTC, ETH, DOGE, USDT, USDC, BNB, XRP, ADA".split(", ").map((n=>`<option value="${n}">${n}</option>`)).join("")}\n    </select>\n  `;document.body.appendChild(document.createElement("div")).innerHTML=`\n<style>\n  #currency_widget_dialog {\n    display: grid;\n    gap: 1.2rem;\n    background-color: lime;\n    z-index: 10;\n    margin-top: 10 px;\n    border-radius: 1rem;\n  }\n  #currency_widget_dialog:not([open]) {\n    pointer-events: none;\n    opacity: 0;\n  }\n  #currency_widget_dialog::backdrop {\n    background-color: hsl(250, 100%, 50%, 0.25);\n  }\n  @media (prefers-color-scheme: dark) {\n    #currency_widget_dialog {\n      background: pink;\n    }\n  }\n  .hidden {\n    display: none;\n  }\n  button[id*="btn"] {\n    height: 1.8rem;\n    border: 1px black solid;\n    border-radius: 5%;\n    background-color: lightgrey;\n    color: blue;\n    cursor: pointer;\n  }\n  #currency_widget_field {\n    position: fixed;\n    bottom: ${i}rem;\n    right: ${d}rem;\n    z-index: 10;\n    border: 1px solid black;\n  }\n  #currency_widget_settings {\n    margin: 0;\n    padding: .1rem .4rem 0 .4rem;\n    height: 1.3rem;\n    display: flex;\n    flex-direction: column;\n    row-gap: .3rem;\n    justify-content: start;\n    align-items: start;\n    background-color: lightcyan;\n    overflow: hidden;\n  }\n  #currency_widget_settings.open {\n    height: 16rem;\n  }\n  #currency_widget_settings_triangle {\n    width: 0;\n    height: 0;\n    border-left: .5rem solid transparent;\n    border-right: .5rem solid transparent;\n    border-top: 1rem solid black;\n  }\n  :is(#currency_widget_settings.open) #currency_widget_settings_triangle {\n    border-bottom: 1rem solid black;\n    border-top: 0;\n  }\n  #currency_widget_settings_move {\n    display: flex;\n    gap: .6rem;\n  }\n  button[id*="arrow"] {\n    height: 1.8rem;\n    border: 2px black solid;\n    border-radius: 10%;\n    background-color: smokewhite;\n    color: black;\n    font-weight: bold;\n    cursor: pointer;\n  }\n  #currency_widget_field table {\n    width: 9rem;\n    border-collapse: collapse;\n    border: 1 px solid black;\n    text-align: center;\n    vertical-align: middle;\n  }\n  #currency_widget_data tr:nth-child(odd) {\n    background-color: linen;\n  }\n</style>\n<dialog\n  id="currency_widget_dialog"\n>\n  <form onsubmit="submitForm(event)">\n    <input\n      id="currency_widget_input"\n      type="text"\n      placeholder="Print your API-key"\n    />\n    ${c("currency_widget_select")}\n    ${c("currency_widget_multi_select",!0)}\n    <button\n      autofocus\n      id="currency_widget_left_btn"\n      formmethod="dialog"\n      type="submit"\n    >Cancel</button>\n    <button\n      id="currency_widget_right_btn"\n      type="submit"\n    >Submit</button>\n  </form>\n</dialog>\n<div id="currency_widget_field">\n  <div id="currency_widget_settings">\n    <div id="currency_widget_settings_triangle"></div>\n    <p>Move:</p>\n      <div id="currency_widget_settings_move">\n        <button\n          id="currency_widget_settings_move_left_arrow"\n        >&larr;</button>\n        <button\n          id="currency_widget_settings_move_up_arrow"\n        >&uarr;</button>\n        <button\n          id="currency_widget_settings_move_right_arrow"\n        >&rarr;</button>\n        <button\n          id="currency_widget_settings_move_bottom_arrow"\n        >&darr;</button>\n      </div>\n    <p>Change:</p>\n    <button id="currency_widget_api_btn">\n      API-key\n    </button>\n    <button id="currency_widget_base_btn">\n      BASE currency\n    </button>\n    <button id="currency_widget_courses_btn">\n     List of currencies\n    </button>\n  </div>\n  <table>\n    <tbody id="currency_widget_data">\n      \n    </tbody>\n  </table>\n</div>\n`;const o=n=>document.getElementById(n),l=o("currency_widget_dialog"),s=o("currency_widget_input"),a=o("currency_widget_left_btn"),_=o("currency_widget_right_btn"),g=o("currency_widget_field"),u=o("currency_widget_data"),m=o("currency_widget_select"),y=o("currency_widget_multi_select"),b=o("currency_widget_settings"),w=o("currency_widget_settings_triangle"),p=o("currency_widget_settings_move_left_arrow"),h=o("currency_widget_settings_move_up_arrow"),v=o("currency_widget_settings_move_right_arrow"),k=o("currency_widget_settings_move_bottom_arrow"),f=o("currency_widget_api_btn"),L=o("currency_widget_base_btn"),E=o("currency_widget_courses_btn");w.addEventListener("click",(()=>{b.classList.toggle("open")}));const S=()=>!l.open&&l.showModal(),$=()=>l.close();let x=localStorage.getItem("key");const M=(n,e)=>localStorage.setItem(n,e),T=t=>"left"===t?Math.min(n,d+1):"right"===t?Math.max(0,d-1):"up"===t?Math.min(e,i+1):"down"===t?Math.max(0,i-1):void 0,A=n=>{"left"===n||"right"===n?(d=T(n),M("RIGHT",d),g.style.right=`${d}rem`):(i=T(n),M("BOTTOM",i),g.style.bottom=`${i}rem`)};p.addEventListener("click",(()=>A("left"))),v.addEventListener("click",(()=>A("right"))),h.addEventListener("click",(()=>A("up"))),k.addEventListener("click",(()=>A("down")));const B=()=>L.innerHTML=`BASE currency: ${t}`;B();a.addEventListener("click",$),_.addEventListener("click",(()=>{if(s.value&&(x=s.value,s.value="",M("key",x)),m.value&&(t=m.value,M("BASE",m.value),B()),y.value){let n=document.getElementById("currency_widget_multi_select").selectedOptions,e=Array.from(n).map((({value:n})=>n)).filter((n=>"--Choose currency"!==n));r=e.join(","),M("TSYMS",r)}$(),D()})),f.addEventListener("click",(()=>{S(),s.classList.remove("hidden"),m.classList.add("hidden"),y.classList.add("hidden")})),L.addEventListener("click",(()=>{S(),s.classList.add("hidden"),y.classList.add("hidden"),m.classList.remove("hidden")})),E.addEventListener("click",(()=>{S(),s.classList.add("hidden"),y.classList.remove("hidden"),m.classList.add("hidden")}));const I=n=>{let e="";Object.keys(n).map((t=>{e+=`\n        <tr>\n          <td>${t}</td>\n          <td>${(1/n[t]).toFixed(3)}</td>\n        </tr>\n      `})),u.innerHTML=e},D=()=>{fetch(`https://min-api.cryptocompare.com/data/price?fsym=${t}&tsyms=${r}&api_key={${x}}`,{credentials:"omit"}).then((n=>n.json())).then(I).catch((n=>{console.log(n)}))};x?.length>0?D():S();